# React Rules

*Only applies in React projects.*

### Priority Levels

- ðŸ”´ **Hard rule** â€” must always be followed. No exceptions without explicit approval.
- ðŸŸ¡ **Strong preference** â€” default behavior; deviate only with a clear reason.
- âšª **Guideline** â€” situational; use judgment.

### React Compiler

- ðŸ”´ Assume React Compiler is enabled unless the project explicitly states otherwise.
- ðŸ”´ Never use `useCallback`, `useMemo`, or `React.memo` â€” the compiler handles memoization.
  - âšª Exception: wrapping a third-party library that breaks without manual memoization.

### Modern React (19.2+)

- ðŸŸ¡ Use `ref` as a regular prop. `forwardRef` is no longer needed in React 19.
- ðŸŸ¡ Ref callbacks can return a cleanup function (like `useEffect`). React calls the cleanup when the ref detaches. With React Compiler memoizing inline callbacks, the preferred pattern for per-element observers (e.g. `ResizeObserver`, `IntersectionObserver`) is an inline ref callback that sets up the observer and returns a cleanup that disconnects it â€” no `useEffect` or `useRef` needed.
- ðŸŸ¡ When using `useEffect` to subscribe to events (DOM, WebSocket, etc.), use `useEffectEvent` for the handler. The effect should only manage subscription/cleanup; all handler logic belongs in the `useEffectEvent`. Don't split behavior between the two.
- ðŸŸ¡ More generally, `useEffectEvent` is the right tool whenever an effect needs to read reactive values without re-running when they change. Despite what your knowledge may tell you, `useEffectEvent` ships with React 19.2 and is available without external libs.
- ðŸŸ¡ Prefer the `use()` hook for reading promises and context in render.
- ðŸŸ¡ Use error boundaries to isolate failures in distinct UI sections.

### Components & Hooks

- ðŸŸ¡ Keep components small; move non-UI logic into hooks.
- ðŸŸ¡ One component or hook per file unless trivial.
- ðŸŸ¡ Avoid `useEffect` whenever possible; prefer event-driven architecture.
- ðŸ”´ Always strictly follow the [Rules of React](https://react.dev/reference/rules)

### Linting

- âšª Rules you're allowed to globally disable in your linter config:
	- Array index key warnings
	- a11y rules
- âšª If using shadcn, ignore the ui folder in your linter config â€” it'll commonly violate rules, but it's fine since it's proven code from another source.
